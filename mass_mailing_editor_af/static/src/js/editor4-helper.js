define(["common/common","common/csharp-to-js-glue","common/modules/underscore","lib/encoder"],function(e,t,n){var r={modalSave:n.template('<div id="modal-msg">{{data}}</div>'),modalWrap:n.template('<div id="modal-data-manager">{{data}}</div>')},i=t.values("indexconfig");window.Helper={GetShortString:function(e,t){return e.length>t?e.substring(0,t)+"...":e},AddHttpProtocolPrefix:function(e){return e==""||e.startsWith("#")||e.startsWith("@")||e.startsWith("http://")||e.startsWith("https://")||e.startsWith("file://")||e.startsWith("mailto:")||e.startsWith("tel:")||e.startsWith("ftp://")?e:(e.startsWith("http:/"),"http://"+e.replace("http:/",""))},AddScroll:function(e,t){var n=e,r=Helper.GetBrowserDimensions().Height;n.css("height",r-t+"px"),n.css("min-height","100px")},RemoveScroll:function(e,t){$.each(e,function(e,t){$(t).css("height","")})},GetBrowserDimensions:function(){var e=0,t=0;return typeof window.innerWidth=="number"?(e=window.innerHeight,t=window.innerWidth):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(e=document.documentElement.clientHeight,t=document.documentElement.clientWidth):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(e=document.body.clientHeight,t=document.body.clientWidth),{Width:parseInt(t),Height:parseInt(e)}},RemoveAttributesFromElement:function(e,t){for(var n in t){var r=$(n).val();r==""?e.removeAttr(t[n]):e.attr(t[n],r)}},CheckVersion:function(){var e=Helper.GetInternetExplorerVersion();return e>-1?"ie":"other"},GetInternetExplorerVersion:function(){var e=-1;if(navigator.appName=="Microsoft Internet Explorer"){var t=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");n.exec(t)!=null&&(e=parseFloat(RegExp.$1))}return e},AdjustEmptyHolders:function(){$("ul[id^='ANP_HOLDER_']").each(function(){$("li",this).length>0&&$(this).removeClass("editorSectionEmpty")})},UpdateAnchorLinksListInContentLinkDropDownList:function(){$('#anpa-link-select optgroup[label="Anchor Links"]').children().remove();for(var e=0;e<$('#html-content.editor-content a[name!=""]').length;e++){var t=$($('#html-content.editor-content a[name!=""]')[e]).attr("name");$('#anpa-link-select optgroup[label="Anchor Links"]').append("<option value=anchor_"+t+" id=#"+t+">#"+t+"</option>")}},AddProxyToImageUrl:function(e){var t=i().imageProxyUrl;return window.location.protocol==="https:"&&(e=t+encodeURIComponent(e)),e},RemoveProxyFromImageUrl:function(e){var t=i().imageProxyUrl;if(e.indexOf(t)==0){var n=decodeURIComponent(e.substr(t.length,e.length));return n}return e},RedirectToPage:function(e){if(e!="")return window.location.href=e,!1},ShowWaitModal:function(e){var t={};$(r.modalSave({data:'<div style="text-align: center;"><span>'+e+'</span><br><br><img src="../../App_Themes/DarkGreen_New/img/loader3.gif"/></div>'})).dialog({title:"",buttons:t,modal:!0}),$(".ui-dialog-titlebar-close").hide()},HtmlDecode:function(t){return e.HtmlDecode(t)},HtmlEncode:function(t){return e.HtmlEncode(t)},ReplaceNewlinesWithBrakelines:function(t){return e.ReplaceNewlinesWithBrakelines(t)},ReplaceBreakelinesWithNewlines:function(t){return e.ReplaceBreakelinesWithNewlines(t)},ShowBadLinkModal:function(t){$(r.modalWrap({data:'<a href="'+t.attr("data-link")+'" target="_blank" rel="noopener">'+TranslationsEditor.Common.TestManually+"</a>"})).dialog({dialogClass:"Editor4PopupNoBorder",title:TranslationsEditor.Common.LinkCouldNotBeValidated,width:500,height:80,close:e.closeAllDialogs,modal:!0})},GetAllUrlsFromContent:function(e){var t=new Array,n=/href="(.*?)"/gi,r=n.exec(e);while(r!=null)t.push(r[1]),r=n.exec(e);return t},IsHttpUrl:function(e){return e.match(/^http:\/\//)!==null}}});